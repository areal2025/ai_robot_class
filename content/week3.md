# ç¬¬3å‘¨ï¼šPythonç¼–ç¨‹ä¸æœºå™¨äººæ§åˆ¶å…¥é—¨

![Python Logo](https://www.python.org/static/community_logos/python-logo-master-v3-TM.png)

**è¯¾æ—¶**: 6å°æ—¶ï¼ˆç¬¬ä¸€æ¬¡è¯¾3å°æ—¶ + ç¬¬äºŒæ¬¡è¯¾3å°æ—¶ï¼‰

---

## ğŸ“‹ æœ¬å‘¨è¯¾ç¨‹è¡¨

| æ¬¡åº | æ—¶é—´ | ä¸»é¢˜ | å†…å®¹ |
|------|------|------|------|
| ç¬¬1æ¬¡ | 3å°æ—¶ | PythonåŸºç¡€ä¸èŠ‚ç‚¹ | Pythonã€ç¬¬ä¸€ä¸ªåŸºç¡€ROS2èŠ‚ç‚¹ |
| ç¬¬2æ¬¡ | 3å°æ—¶ | æœºå™¨äººæ§åˆ¶ | é€Ÿåº¦æ§åˆ¶ã€èµ°æ­£æ–¹å½¢ |

---

## ç¬¬ä¸€æ¬¡è¯¾ï¼šPythonåŸºç¡€ä¸èŠ‚ç‚¹ï¼ˆ3å°æ—¶ï¼‰

### â±ï¸ æ—¶é—´åˆ†é…

| ç¯èŠ‚ | æ—¶é—´ | å†…å®¹ |
|------|------|------|
| è®²è§£ | 40åˆ†é’Ÿ | PythonåŸºç¡€å›é¡¾ |
| è®²è§£ | 50åˆ†é’Ÿ | ROS2 Pythonåº“ä»‹ç» |
| æ¼”ç¤º | 30åˆ†é’Ÿ | ç¬¬ä¸€ä¸ªHello WorldèŠ‚ç‚¹ |
| èŒ¶æ­‡ | 10åˆ†é’Ÿ | ä¼‘æ¯ |
| å®è·µ | 40åˆ†é’Ÿ | ç¼–å†™ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ |
| æ€»ç»“ | 10åˆ†é’Ÿ | æœ¬æ¬¡è¯¾å°ç»“ |

---

## 1.1 PythonåŸºç¡€å›é¡¾ï¼ˆ40åˆ†é’Ÿï¼‰

### 1.1.1 å˜é‡å’Œæ•°æ®ç±»å‹

```python
# æ•´æ•°
age = 25

# æµ®ç‚¹æ•°ï¼ˆå°æ•°ï¼‰
speed = 1.5

# å­—ç¬¦ä¸²
name = "turtle"

# å¸ƒå°”å€¼
is_moving = True

# åˆ—è¡¨
colors = ["red", "green", "blue"]

# å­—å…¸
robot = {
    "name": "TurtleBot",
    "speed": 1.0,
    "battery": 80
}
```

### 1.1.2 å‡½æ•°

```python
def say_hello():
    """è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°"""
    print("Hello, Robot!")

# å¸¦å‚æ•°çš„å‡½æ•°
def move_robot(speed, direction):
    """ç§»åŠ¨æœºå™¨äºº"""
    print(f"Moving at {speed} m/s, direction: {direction}")

# è°ƒç”¨
say_hello()
move_robot(1.0, "forward")
```

### 1.1.3 ç±»ï¼ˆé¢å‘å¯¹è±¡ï¼‰

```python
class Robot:
    """æœºå™¨äººå°ç±»"""
    
    # åˆå§‹åŒ–æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ï¼‰
    def __init__(self, name):
        self.name = name  # å®ä¾‹å±æ€§
        self.speed = 0   # åˆå§‹é€Ÿåº¦ä¸º0
    
    # æ–¹æ³•
    def move(self, speed):
        """ç§»åŠ¨æ–¹æ³•"""
        self.speed = speed
        print(f"{self.name} is moving at {speed} m/s")
    
    def stop(self):
        """åœæ­¢"""
        self.speed = 0
        print(f"{self.name} stopped")

# åˆ›å»ºå®ä¾‹
my_robot = Robot("TurtleBot")
my_robot.move(1.0)  # è¾“å‡ºï¼šTurtleBot is moving at 1.0 m/s
my_robot.stop()     # è¾“å‡ºï¼šTurtleBot stopped
```

---

## 1.2 ROS2 Pythonåº“ï¼ˆ50åˆ†é’Ÿï¼‰

### 1.2.1 rclpyç®€ä»‹

> **rclpy** = ROS2 Client Library for Python
> 
> ROS2çš„Pythonå®¢æˆ·ç«¯åº“ï¼Œè®©æˆ‘ä»¬èƒ½ç”¨Pythonå†™ROS2ç¨‹åº

```
rclpy ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åº”ç”¨ç¨‹åº                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚          rclpy (Pythonåº“)            â”‚  â”‚
â”‚   â”‚  â€¢ Node         â€¢ Publisher         â”‚  â”‚
â”‚   â”‚  â€¢ Subscription  â€¢ Timer             â”‚  â”‚
â”‚   â”‚  â€¢ Service      â€¢ Action             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                        â”‚
â”‚                     â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚        rcl (Cåº“)                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                        â”‚
â”‚                     â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚         DDS ä¸­é—´ä»¶                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2.2 å¸¸ç”¨æ¨¡å—

```python
# å¯¼å…¥ROS2 Pythonåº“
import rclpy
from rclpy.node import Node

# å¯¼å…¥æ¶ˆæ¯ç±»å‹
from geometry_msgs.msg import Twist
from sensor_msgs.msg import Image
from nav_msgs.msg import Odometry

# å¯¼å…¥æ—¶é—´
from rclpy.duration import Duration
import time
```

---

## 1.3 ç¬¬ä¸€ä¸ªROS2 PythonèŠ‚ç‚¹ï¼ˆ30åˆ†é’Ÿï¼‰

### ä»£ç æ¨¡æ¿

```python
#!/usr/bin/env python3
"""
ç¬¬ä¸€ä¸ªROS2 PythonèŠ‚ç‚¹ï¼šHello World
"""

import rclpy
from rclpy.node import Node


class HelloNode(Node):
    """æœ€ç®€å•çš„ROS2èŠ‚ç‚¹"""
    
    def __init__(self):
        # è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–ï¼ŒèŠ‚ç‚¹åä¸º 'hello_node'
        super().__init__('hello_node')
        
        # æ‰“å°æ—¥å¿—ï¼ˆROS2çš„printï¼‰
        self.get_logger().info('ğŸ‰ Hello ROS2! æˆ‘æ˜¯ç¬¬ä¸€ä¸ªPythonèŠ‚ç‚¹ï¼')


def main(args=None):
    """ä¸»å‡½æ•°ï¼šå…¥å£ç‚¹"""
    
    # 1. åˆå§‹åŒ–ROS2ï¼ˆå¿…é¡»çš„ç¬¬ä¸€æ­¥ï¼‰
    rclpy.init(args=args)
    
    # 2. åˆ›å»ºèŠ‚ç‚¹
    node = HelloNode()
    
    # 3. è®©èŠ‚ç‚¹ä¿æŒè¿è¡Œï¼ˆspin = ä¿æŒç›‘å¬å›è°ƒï¼‰
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        # Ctrl+C ä¼˜é›…é€€å‡º
        pass
    finally:
        # 4. æ¸…ç†èµ„æº
        node.destroy_node()
        rclpy.shutdown()


if __name__ == '__main__':
    main()
```

### è¿è¡Œ

```bash
# ä¿å­˜æ–‡ä»¶ä¸º hello_node.py
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x hello_node.py

# è¿è¡Œ
python3 hello_node.py

# åº”è¯¥çœ‹åˆ°è¾“å‡ºï¼š
# [INFO] [hello_node]: ğŸ‰ Hello ROS2! æˆ‘æ˜¯ç¬¬ä¸€ä¸ªPythonèŠ‚ç‚¹ï¼
```

---

## 1.4 å‘å¸ƒé€Ÿåº¦å‘½ä»¤ï¼ˆ40åˆ†é’Ÿï¼‰

### å®Œæ•´ä»£ç 

```python
#!/usr/bin/env python3
"""
è®©å°ä¹Œé¾Ÿç›´è¡Œçš„PythonèŠ‚ç‚¹
"""

import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist


class StraightMover(Node):
    """æ§åˆ¶å°ä¹Œé¾Ÿç›´è¡Œçš„èŠ‚ç‚¹"""
    
    def __init__(self):
        # èŠ‚ç‚¹å
        super().__init__('straight_mover')
        
        # åˆ›å»ºå‘å¸ƒè€…ï¼šå‘å¸ƒåˆ° /turtle1/cmd_vel
        # Twist æ˜¯é€Ÿåº¦æ¶ˆæ¯ç±»å‹
        # 10 æ˜¯é˜Ÿåˆ—å¤§å°
        self.cmd_vel_pub = self.create_publisher(
            Twist, 
            '/turtle1/cmd_vel', 
            10
        )
        
        # åˆ›å»ºå®šæ—¶å™¨ï¼šæ¯0.1ç§’è°ƒç”¨ä¸€æ¬¡ callback
        self.timer = self.create_timer(0.1, self.timer_callback)
        
        self.get_logger().info('ğŸš€ ç›´è¡Œæ§åˆ¶èŠ‚ç‚¹å·²å¯åŠ¨ï¼')
    
    def timer_callback(self):
        """å®šæ—¶å™¨å›è°ƒå‡½æ•°ï¼šæ¯0.1ç§’æ‰§è¡Œä¸€æ¬¡"""
        
        # åˆ›å»ºé€Ÿåº¦æ¶ˆæ¯
        msg = Twist()
        msg.linear.x = 1.0    # å‰è¿› 1 m/s
        msg.angular.z = 0.0   # ä¸æ—‹è½¬
        
        # å‘å¸ƒæ¶ˆæ¯
        self.cmd_vel_pub.publish(msg)
        
        # æ‰“å°æ—¥å¿—
        self.get_logger().info('Published: linear.x=1.0')


def main(args=None):
    rclpy.init(args=args)
    node = StraightMover()
    
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        pass
    finally:
        node.destroy_node()
        rclpy.shutdown()


if __name__ == '__main__':
    main()
```

### ä»£ç è¯¦è§£

```python
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚                   ä»£ç ç»“æ„è§£æ                              â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                             â”‚
# â”‚  1. å¯¼å…¥åº“                                                  â”‚
# â”‚     import rclpy              # ROS2 Pythonåº“               â”‚
# â”‚     from rclpy.node import Node  # èŠ‚ç‚¹åŸºç±»                 â”‚
# â”‚     from geometry_msgs.msg import Twist  # é€Ÿåº¦æ¶ˆæ¯         â”‚
# â”‚                                                             â”‚
# â”‚  2. å®šä¹‰èŠ‚ç‚¹ç±»                                              â”‚
# â”‚     class StraightMover(Node):      # ç»§æ‰¿Nodeç±»           â”‚
# â”‚         def __init__(self):         # åˆå§‹åŒ–               â”‚
# â”‚             self.create_publisher() # åˆ›å»ºå‘å¸ƒè€…            â”‚
# â”‚             self.create_timer()     # åˆ›å»ºå®šæ—¶å™¨            â”‚
# â”‚         def timer_callback(self):   # å›è°ƒå‡½æ•°             â”‚
# â”‚                                                             â”‚
# â”‚  3. ä¸»å‡½æ•°                                                  â”‚
# â”‚     rclpy.init()             # åˆå§‹åŒ–ROS2                  â”‚
# â”‚     rclpy.spin(node)        # ä¿æŒè¿è¡Œ                    â”‚
# â”‚     rclpy.shutdown()        # å…³é—­ROS2                    â”‚
# â”‚                                                             â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬äºŒæ¬¡è¯¾ï¼šæœºå™¨äººæ§åˆ¶ï¼ˆ3å°æ—¶ï¼‰

### â±ï¸ æ—¶é—´åˆ†é…

| ç¯èŠ‚ | æ—¶é—´ | å†…å®¹ |
|------|------|------|
| å¤ä¹  | 20åˆ†é’Ÿ | æé—®å·©å›º |
| è®²è§£ | 40åˆ†é’Ÿ | èµ°æ­£æ–¹å½¢åŸç† |
| æ¼”ç¤º | 20åˆ†é’Ÿ | å®Œæ•´ä»£ç æ¼”ç¤º |
| å®è·µ | 60åˆ†é’Ÿ | èµ°æ­£æ–¹å½¢å®éªŒ |
| èŒ¶æ­‡ | 10åˆ†é’Ÿ | ä¼‘æ¯ |
| å®è·µ | 60åˆ†é’Ÿ | æŒ‘æˆ˜ä»»åŠ¡ |

---

## 2.1 èµ°æ­£æ–¹å½¢åŸç†ï¼ˆ40åˆ†é’Ÿï¼‰

### 2.1.1 è¿åŠ¨åˆ†è§£

```
èµ°æ­£æ–¹å½¢ = 4æ¡ç›´çº¿ + 4æ¬¡90Â°è½¬å¼¯

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚
    â‘¢    â”‚    â‘¡      â”‚    â‘ 
         â”‚           â”‚
         â”‚           â”‚
         â”‚    â‘£      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†‘
           èµ·ç‚¹/ç»ˆç‚¹

æ­¥éª¤åˆ†è§£ï¼š
1. ç›´è¡Œ â†’ å³è½¬90Â°
2. ç›´è¡Œ â†’ å³è½¬90Â°  
3. ç›´è¡Œ â†’ å³è½¬90Â°
4. ç›´è¡Œ â†’ å³è½¬90Â°ï¼ˆå›åˆ°èµ·ç‚¹ï¼‰
```

### 2.1.2 å‚æ•°è®¡ç®—

```python
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚                    å‚æ•°è®¡ç®—                                  â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                             â”‚
# â”‚  è®¾å®šå‚æ•°ï¼š                                                  â”‚
# â”‚  â€¢ è¾¹é•¿ SIDE_LENGTH = 2.0 ç±³                               â”‚
# â”‚  â€¢ çº¿é€Ÿåº¦ SPEED = 1.0 m/s                                 â”‚
# â”‚  â€¢ è§’é€Ÿåº¦ TURN_SPEED = 1.0 rad/s                          â”‚
# â”‚                                                             â”‚
# â”‚  è®¡ç®—ï¼š                                                     â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚ ç›´è¡Œæ—¶é—´ = è·ç¦» / é€Ÿåº¦                               â”‚   â”‚
# â”‚  â”‚ MOVE_TIME = SIDE_LENGTH / SPEED                     â”‚   â”‚
# â”‚  â”‚           = 2.0 / 1.0 = 2.0 ç§’                       â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                             â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚ è½¬å¼¯æ—¶é—´ = è§’åº¦(å¼§åº¦) / è§’é€Ÿåº¦                       â”‚   â”‚
# â”‚  â”‚ 90Â° = Ï€/2 â‰ˆ 1.5708 å¼§åº¦                             â”‚   â”‚
# â”‚  â”‚ TURN_TIME = (Ï€/2) / TURN_SPEED                      â”‚   â”‚
# â”‚  â”‚           = 1.5708 / 1.0 = 1.5708 ç§’                 â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                             â”‚
# â”‚  æ€»æ—¶é—´ = 4 Ã— (2.0 + 1.5708) = 14.28 ç§’                   â”‚
# â”‚                                                             â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1.3 å¸¸ç”¨å¤šè¾¹å½¢å‚æ•°

| å›¾å½¢ | è¾¹æ•° | å¤–è§’ | å¤–è§’(å¼§åº¦) | è½¬å¼¯æ—¶é—´(rad/s=1) |
|------|------|------|-----------|------------------|
| ä¸‰è§’å½¢ | 3 | 120Â° | 2.094 | 2.094ç§’ |
| æ­£æ–¹å½¢ | 4 | 90Â° | 1.571 | 1.571ç§’ |
| äº”è¾¹å½¢ | 5 | 72Â° | 1.257 | 1.257ç§’ |
| å…­è¾¹å½¢ | 6 | 60Â° | 1.047 | 1.047ç§’ |
| å…«è¾¹å½¢ | 8 | 45Â° | 0.785 | 0.785ç§’ |

---

## 2.2 å®Œæ•´ä»£ç ï¼ˆ20åˆ†é’Ÿï¼‰

```python
#!/usr/bin/env python3
"""
è®©å°ä¹Œé¾Ÿèµ°æ­£æ–¹å½¢çš„æ§åˆ¶è„šæœ¬
"""

import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist
import time


class SquareMover(Node):
    """èµ°æ­£æ–¹å½¢çš„æ§åˆ¶èŠ‚ç‚¹"""
    
    def __init__(self):
        super().__init__('square_mover')
        
        # åˆ›å»ºå‘å¸ƒè€…
        self.cmd_vel_pub = self.create_publisher(
            Twist, 
            '/turtle1/cmd_vel', 
            10
        )
        
        # ============ å‚æ•°è®¾ç½® ============
        self.SPEED = 1.0              # çº¿é€Ÿåº¦ m/s
        self.TURN_SPEED = 1.0          # è§’é€Ÿåº¦ rad/s
        self.SIDE_LENGTH = 2.0         # è¾¹é•¿ m
        
        # è®¡ç®—è¿åŠ¨æ—¶é—´
        self.MOVE_TIME = self.SIDE_LENGTH / self.SPEED
        self.TURN_TIME = 1.5708 / self.TURN_SPEED  # 90Â° = Ï€/2
        
        self.get_logger().info('ğŸ¯ æ­£æ–¹å½¢æ§åˆ¶èŠ‚ç‚¹å¯åŠ¨ï¼')
        self.get_logger().info(f'ğŸ“ è¾¹é•¿: {self.SIDE_LENGTH}m, é€Ÿåº¦: {self.SPEED}m/s')
    
    def move_straight(self, duration):
        """ç›´è¡ŒæŒ‡å®šæ—¶é—´"""
        self.get_logger().info('â†’ ç›´è¡Œ...')
        
        msg = Twist()
        msg.linear.x = float(self.SPEED)
        msg.angular.z = 0.0
        
        # è®°å½•å¼€å§‹æ—¶é—´
        start_time = self.get_clock().now()
        
        # æŒç»­å‘å¸ƒå‘½ä»¤
        while (self.get_clock().now() - start_time).nanoseconds < duration * 1e9:
            self.cmd_vel_pub.publish(msg)
            time.sleep(0.01)
        
        # åœæ­¢
        self.stop()
        self.get_logger().info('âœ“ ç›´è¡Œå®Œæˆ')
    
    def turn(self, duration):
        """æ—‹è½¬æŒ‡å®šæ—¶é—´"""
        self.get_logger().info('â†» æ—‹è½¬...')
        
        msg = Twist()
        msg.linear.x = 0.0
        msg.angular.z = float(self.TURN_SPEED)
        
        start_time = self.get_clock().now()
        
        while (self.get_clock().now() - start_time).nanoseconds < duration * 1e9:
            self.cmd_vel_pub.publish(msg)
            time.sleep(0.01)
        
        self.stop()
        self.get_logger().info('âœ“ æ—‹è½¬å®Œæˆ')
    
    def stop(self):
        """åœæ­¢è¿åŠ¨"""
        msg = Twist()
        msg.linear.x = 0.0
        msg.angular.z = 0.0
        self.cmd_vel_pub.publish(msg)
        time.sleep(0.1)
    
    def move_square(self):
        """æ‰§è¡Œèµ°æ­£æ–¹å½¢"""
        self.get_logger().info('ğŸ å¼€å§‹èµ°æ­£æ–¹å½¢ï¼')
        
        for i in range(4):
            self.get_logger().info(f'â”â”â” ç¬¬ {i+1}/4 æ¡è¾¹ â”â”â”')
            self.move_straight(self.MOVE_TIME)
            
            self.get_logger().info(f'â”â”â” ç¬¬ {i+1}/4 æ¬¡è½¬å¼¯ â”â”â”')
            self.turn(self.TURN_TIME)
        
        self.get_logger().info('ğŸ‰ æ­£æ–¹å½¢èµ°å®Œï¼å›åˆ°èµ·ç‚¹ï¼')


def main(args=None):
    rclpy.init(args=args)
    node = SquareMover()
    
    # ç»™ç³»ç»Ÿä¸€ç‚¹å‡†å¤‡æ—¶é—´
    time.sleep(1)
    
    # æ‰§è¡Œèµ°æ­£æ–¹å½¢
    node.move_square()
    
    node.destroy_node()
    rclpy.shutdown()


if __name__ == '__main__':
    main()
```

---

## 2.3 æŒ‘æˆ˜ä»»åŠ¡ï¼ˆ60åˆ†é’Ÿï¼‰

### ä»»åŠ¡1ï¼šèµ°ä¸‰è§’å½¢

```python
# ä¸‰è§’å½¢å‚æ•°
# å†…è§’ = 60Â°
# å¤–è§’ = 180Â° - 60Â° = 120Â° = 2Ï€/3 â‰ˆ 2.094 rad

TURN_TIME_TRIANGLE = 2.094 / TURN_SPEED
```

### ä»»åŠ¡2ï¼šèµ°äº”è¾¹å½¢

```python
# äº”è¾¹å½¢å‚æ•°
# å†…è§’ = 108Â°
# å¤–è§’ = 180Â° - 108Â° = 72Â° = 0.4Ï€ â‰ˆ 1.257 rad

TURN_TIME_PENTAGON = 1.257 / TURN_SPEED
```

### ä»»åŠ¡3ï¼šå¯é…ç½®è¾¹é•¿

```python
def main(args=None):
    rclpy.init(args=args)
    node = SquareMover()
    
    # è®©ç”¨æˆ·è¾“å…¥è¾¹é•¿
    side = input("è¯·è¾“å…¥è¾¹é•¿(ç±³): ")
    node.SIDE_LENGTH = float(side)
    node.MOVE_TIME = node.SIDE_LENGTH / node.SPEED
    
    node.move_square()
```

---

## æœ¬å‘¨å®éªŒæŠ¥å‘Š

### âœ… éªŒæ”¶æ¸…å•

| åºå· | å®éªŒ | è¦æ±‚ | å®Œæˆ |
|------|------|------|------|
| 1 | Hello World | è¿è¡Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ | â˜ |
| 2 | ç›´è¡Œ | å°ä¹Œé¾Ÿå‰è¿› | â˜ |
| 3 | åé€€ | å°ä¹Œé¾Ÿåé€€ | â˜ |
| 4 | æ—‹è½¬ | åŸåœ°è½¬åœˆ | â˜ |
| 5 | æ­£æ–¹å½¢ | èµ°æ­£æ–¹å½¢ | â˜ |
| 6 | ä¸‰è§’å½¢ | èµ°ä¸‰è§’å½¢ | â˜ |
| 7 | äº”è¾¹å½¢ | èµ°äº”è¾¹å½¢ | â˜ |

---

## æœ¬å‘¨ä½œä¸š

### ğŸ“ ç†è®ºé¢˜

1. è§£é‡Š `create_publisher` å’Œ `create_timer` çš„ä½œç”¨
2. ä¸ºä»€ä¹ˆåœ¨å¾ªç¯ä¸­è¦æŒç»­å‘å¸ƒå‘½ä»¤ï¼Ÿ

### ğŸ“ è®¡ç®—é¢˜

- æ­£æ–¹å½¢è¾¹é•¿3ç±³ï¼Œé€Ÿåº¦1m/sï¼Œèµ°å®Œéœ€è¦å¤šå°‘ç§’ï¼Ÿ

### ğŸ’» å®è·µé¢˜

1. ä¿®æ”¹ä»£ç ï¼Œå®ç°èµ°é•¿æ–¹å½¢ï¼ˆé•¿3mï¼Œå®½2mï¼‰
2. å°è¯•è®©è¾¹é•¿å¯é…ç½®

---

## çŸ¥è¯†ç‚¹é€ŸæŸ¥è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç¬¬3å‘¨çŸ¥è¯†ç‚¹é€ŸæŸ¥                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¦‚å¿µ                                                          â”‚
â”‚  â”œâ”€â”€ rclpy = ROS2 Pythonå®¢æˆ·ç«¯åº“                            â”‚
â”‚  â”œâ”€â”€ Node = ROS2èŠ‚ç‚¹                                        â”‚
â”‚  â”œâ”€â”€ Publisher = å‘å¸ƒè€…                                     â”‚
â”‚  â”œâ”€â”€ Timer = å®šæ—¶å™¨                                         â”‚
â”‚  â””â”€â”€ Twist = é€Ÿåº¦æ¶ˆæ¯ç±»å‹                                   â”‚
â”‚      â”œâ”€â”€ linear.x = çº¿é€Ÿåº¦ (m/s)                           â”‚
â”‚      â””â”€â”€ angular.z = è§’é€Ÿåº¦ (rad/s)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…¬å¼                                                          â”‚
â”‚  â”œâ”€â”€ ç›´è¡Œæ—¶é—´ = è·ç¦» / é€Ÿåº¦                                  â”‚
â”‚  â”œâ”€â”€ è½¬å¼¯æ—¶é—´ = è§’åº¦(å¼§åº¦) / è§’é€Ÿåº¦                         â”‚
â”‚  â””â”€â”€ 90Â° = Ï€/2 â‰ˆ 1.57 rad                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä»£ç ç»“æ„                                                      â”‚
â”‚  â”œâ”€â”€ import rclpy, Node, Twist                              â”‚
â”‚  â”œâ”€â”€ class MyNode(Node):                                    â”‚
â”‚  â”œâ”€â”€ def __init__(self):                                    â”‚
â”‚  â”‚   â”œâ”€â”€ self.create_publisher()                          â”‚
â”‚  â”‚   â””â”€â”€ self.create_timer()                               â”‚
â”‚  â””â”€â”€ def main():                                            â”‚
â”‚      â”œâ”€â”€ rclpy.init()                                       â”‚
â”‚      â”œâ”€â”€ rclpy.spin(node)                                   â”‚
â”‚      â””â”€â”€ rclpy.shutdown()                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š è¯¾åé˜…è¯»

- [ROS2 Pythonæ•™ç¨‹](https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html)
- [Pythonå®˜æ–¹æ–‡æ¡£](https://docs.python.org/3/)

---

## ç¬¬ä¸€é˜¶æ®µå®Œæˆï¼

---

## ğŸ†• è¿›é˜¶ï¼šç”¨Pythonæ§åˆ¶ROS2 + é›†æˆOpenClaw

### RosClaw PythonèŠ‚ç‚¹

```python
#!/usr/bin/env python3
"""
RosClaw Discovery Node - è‡ªåŠ¨å‘ç°ROS2èƒ½åŠ›
"""

import rclpy
from rclpy.node import Node
from rosclaw_msgs.srv import GetCapabilities, CallService, PublishMessage

class RosClawDiscovery(Node):
    """è‡ªåŠ¨å‘ç°æœºå™¨äººèƒ½åŠ›"""
    
    def __init__(self):
        super().__init__('rosclaw_discovery')
        
        # åˆ›å»ºæœåŠ¡
        self.get_capabilities = self.create_service(
            GetCapabilities, 
            '/rosclaw/get_capabilities',
            self.handle_get_capabilities
        )
        
        self.get_logger().info('RosClaw Discovery Node å·²å¯åŠ¨')
    
    def handle_get_capabilities(self, request, response):
        """è¿”å›æœºå™¨äººèƒ½åŠ›åˆ—è¡¨"""
        response.capabilities = [
            'navigation',
            'camera',
            'speak',
            'battery'
        ]
        return response

def main(args=None):
    rclpy.init(args=args)
    node = RosClawDiscovery()
    rclpy.spin(node)
    node.destroy_node()
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```

### é›†æˆOpenClaw

```bash
# 1. å®‰è£…OpenClaw
git clone https://github.com/openclaw/openclaw.git
cd openclaw && pnpm install

# 2. å®‰è£…RosClawæ’ä»¶
pnpm add @rosclaw/openclaw-plugin

# 3. é…ç½®
# openclaw.config.js
export default {
  plugins: [
    ['@rosclaw/openclaw-plugin', {
      wsUrl: 'ws://localhost:9090'
    }]
  ]
}

# 4. å¯åŠ¨
pnpm start
```

### å®Œæ•´æ§åˆ¶æµç¨‹

```
ç”¨æˆ·: "è®©æœºå™¨äººèµ°æ­£æ–¹å½¢"
   â†“
OpenClaw AI Agent ç†è§£æ„å›¾
   â†“
RosClaw æ’ä»¶è°ƒç”¨ ros2_publish
   â†“
PythonèŠ‚ç‚¹å‘å¸ƒ /cmd_vel
   â†“
æœºå™¨äººæ‰§è¡Œï¼ˆèµ°æ­£æ–¹å½¢ï¼‰
   â†“
Agent å‘é€åé¦ˆç»™ç”¨æˆ·
```


> **ç¬¬1-3å‘¨æˆå°±**ï¼š
> - âœ… æ­å»ºROS2å¼€å‘ç¯å¢ƒ
> - âœ… ç†è§£èŠ‚ç‚¹å’Œè¯é¢˜é€šä¿¡æœºåˆ¶  
> - âœ… ç”¨å‘½ä»¤è¡Œæ§åˆ¶æœºå™¨äºº
> - âœ… ç”¨Pythonç¼–å†™æœºå™¨äººæ§åˆ¶ç¨‹åº
> - âœ… å®ç°æœºå™¨äººèµ°æ­£æ–¹å½¢

---

*ç¬¬ä¸€é˜¶æ®µï¼ˆåŸºç¡€ä¸ç¯å¢ƒæ­å»ºï¼‰å®Œæˆï¼ğŸŠ*
